<h1 class="content__heading">Ученики</h1>


<div class="students___menu">
  <button class="btn btn-lg btn-info" ng-click="isAllDetailsShown = !isAllDetailsShown;">
    <span ng-hide="isAllDetailsShown">Показать подробности для всех</span>
    <span ng-show="isAllDetailsShown">Скрыть подробности для всех</span>
  </button>
  <button ng-click="showStatistics()" class="btn btn-lg btn-primary">
    <span ng-hide="isStatisticsShown">Показать статистику по ученикам</span>
    <span ng-show="isStatisticsShown">Скрыть статистику по ученикам</span>
  </button>
</div>


<div ng-show="isStatisticsShown" class="students__statistics__container">
  <div class="students__statistics__sex">
    <h3>Половой состав</h3>
    <canvas id="students__statistics" width="300" height="300"></canvas>
  </div>
  <div class="students__statistics__cities">
    <h3>Города</h3>
    <canvas id="students__statistics_cities" width="600" height="300"></canvas>
  </div>
</div>


<ul class="persons__list">
  <li ng-repeat="s in students | orderBy:'last_name'" class="row persons__list__item">
    <div class="col-md-4 col-sm-4">
      <div class="person__photo__container">
        <div class="person__photo__frame person__photo__left__top__frame"> </div>
        <div class="person__photo__frame person__photo__rigth__top__frame"> </div>
        <img ng-if="s.link_photo" ng-src="{{ s.link_photo }}" class="person__photo" style="-webkit-transform: rotate({{ s.rotation_degree }}deg)">
        <div class="person__photo__frame person__photo__left__bottom__frame"> </div>
        <div class="person__photo__frame person__photo__rigth__bottom__frame"> </div>
      </div>
    </div>
    <div class="col-md-8 col-sm-8 person__details">
      <div class="person__name">{{ s.first_name }} {{ s.last_name }}</div>
      <div class="person__links">
        <a ng-if="s.link_yaru" target="_blank" href="{{ s.link_yaru }}" title="Профиль в ya.ru" alt="ya.ru"><img src="img/icons/yandex.png" title="Профиль в ya.ru"></a> 
        <a ng-if="s.link_vk" target="_blank" href="{{ s.link_vk }}" title="Профиль в ВКонтакте" alt="Вконтакте"><img src="img/icons/vkontakte.png" title="Профиль в ВКонтакте"></a>
        <a ng-if="s.link_facebook" target="_blank" href="{{ s.link_facebook }}" title="Профиль в ВКонтакте" alt="Вконтакте"><img src="img/icons/facebook.png" title="Профиль в FaceBook"></a>
        <a ng-if="s.link_gihub" target="_blank" href="{{ s.link_gihub }}" title="Профиль в GitHub" alt="GitHub"><img src="img/icons/github.png" title="Профиль в GitHub"></a>   
      </div>
      <button type="button" class="btn btn-info btn-lg person__details__button" ng-click="isAboutShown = !isAboutShown">
        <span ng-show="isAboutShown">Скрыть подробности</span>
        <span ng-hide="isAboutShown">Подробнее</span>
      </button>
      <div ng-if="isAboutShown || isAllDetailsShown" class="person__about">
        <div ng-if="s.city"><span class="text-muted">Город:</span> {{ s.city }}</div>
        <div ng-if="s.about" style="white-space: pre-line">{{ s.about }}</div>
      </div>  
    </div>
  </li>
</ul>